# fafafa.ssl å¿«é€Ÿå…¥é—¨

æ¬¢è¿ä½¿ç”¨ fafafa.sslï¼æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ 5 åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨ã€‚

## ç›®å½•
- [ä»€ä¹ˆæ˜¯ fafafa.ssl](#ä»€ä¹ˆæ˜¯-fafafassl)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [å®‰è£…](#å®‰è£…)
- [ç¬¬ä¸€ä¸ªHTTPSè¯·æ±‚](#ç¬¬ä¸€ä¸ªhttpsè¯·æ±‚)
- [ä¸‹ä¸€æ­¥](#ä¸‹ä¸€æ­¥)

---

## ä»€ä¹ˆæ˜¯ fafafa.ssl

fafafa.ssl æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„ SSL/TLS åº“ï¼Œä¸º Free Pascal å’Œ Delphi æä¾›ç®€å•æ˜“ç”¨çš„ HTTPS é€šä¿¡æ¥å£ã€‚

### ä¸»è¦ç‰¹æ€§

- âœ… **ç»Ÿä¸€æ¥å£**ï¼šåŒæ—¶æ”¯æŒ OpenSSL å’Œ Windows Schannel
- âœ… **ç®€å•æ˜“ç”¨**ï¼šå‡ è¡Œä»£ç å³å¯å®ç° HTTPS é€šä¿¡
- âœ… **ç”Ÿäº§å°±ç»ª**ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—ç³»ç»Ÿ
- âœ… **è·¨å¹³å°**ï¼šæ”¯æŒ Windowsã€Linuxã€macOS
- âœ… **å…¨åŠŸèƒ½**ï¼šæ”¯æŒå®¢æˆ·ç«¯/æœåŠ¡å™¨ã€åŒå‘TLSã€ä¼šè¯å¤ç”¨ç­‰

---

## ç³»ç»Ÿè¦æ±‚

### å¿…éœ€
- Free Pascal 3.2.0+ æˆ– Delphi 10.x+
- Linux: OpenSSL 1.1.1+ æˆ– 3.x
- Windows: å†…ç½® Schannel æˆ– OpenSSL

### å¯é€‰
- Lazarus IDEï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰
- OpenSSL å¼€å‘åŒ…ï¼ˆLinuxï¼‰

---

## å®‰è£…

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰

```bash
git clone https://github.com/ä½ çš„ç”¨æˆ·å/fafafa.ssl.git
cd fafafa.ssl
```

### æ–¹æ³•äºŒï¼šä¸‹è½½æºç 

1. è®¿é—® [GitHub Releases](https://github.com/ä½ çš„ç”¨æˆ·å/fafafa.ssl/releases)
2. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
3. è§£å‹åˆ°é¡¹ç›®ç›®å½•

### é…ç½®ç¼–è¯‘å™¨è·¯å¾„

#### Lazarus

1. æ‰“å¼€ `fafafa_ssl.lpk`
2. ç‚¹å‡» "Use" â†’ "Install"
3. é‡æ–°ç¼–è¯‘ IDE

#### Free Pascal (å‘½ä»¤è¡Œ)

```bash
# æ·»åŠ åˆ°æœç´¢è·¯å¾„
export FPC_PATH=/path/to/fafafa.ssl/src
fpc -Fu$FPC_PATH your_program.pas
```

#### Delphi

1. å·¥å…· â†’ é€‰é¡¹ â†’ Language â†’ Delphi â†’ Library
2. æ·»åŠ  `src` ç›®å½•åˆ° Library Path

---

## ç¬¬ä¸€ä¸ªHTTPSè¯·æ±‚

### å®Œæ•´ç¤ºä¾‹ä»£ç 

åˆ›å»ºæ–‡ä»¶ `my_first_https.pas`ï¼š

```pascal
program my_first_https;

{$mode objfpc}{$H+}

uses
  SysUtils, fafafa.ssl, fafafa.ssl.base;

var
  LContext: ISSLContext;
  LConnection: ISSLConnection;
  LRequest, LResponse: string;
  LBuffer: array[0..8191] of Byte;
  LBytesRead: Integer;

begin
  try
    // 1. åˆ›å»º SSL ä¸Šä¸‹æ–‡
    WriteLn('åˆ›å»ºSSLä¸Šä¸‹æ–‡...');
    LContext := TSSLFactory.CreateContext(sslOpenSSL, sslCtxClient);
    
    // 2. åˆ›å»ºè¿æ¥
    WriteLn('åˆ›å»ºè¿æ¥...');
    LConnection := LContext.CreateConnection;
    
    // 3. è¿æ¥åˆ°æœåŠ¡å™¨
    WriteLn('è¿æ¥åˆ° www.google.com:443...');
    LConnection.Connect('www.google.com', 443);
    WriteLn('è¿æ¥æˆåŠŸï¼');
    
    // 4. å‘é€ HTTP è¯·æ±‚
    LRequest := 'GET / HTTP/1.1'#13#10 +
                'Host: www.google.com'#13#10 +
                'User-Agent: fafafa.ssl/1.0'#13#10 +
                'Accept: */*'#13#10 +
                'Connection: close'#13#10#13#10;
    
    WriteLn('å‘é€è¯·æ±‚...');
    LConnection.Write(LRequest[1], Length(LRequest));
    
    // 5. è¯»å–å“åº”
    WriteLn('è¯»å–å“åº”...');
    LBytesRead := LConnection.Read(LBuffer[0], Length(LBuffer));
    SetLength(LResponse, LBytesRead);
    Move(LBuffer[0], LResponse[1], LBytesRead);
    
    // 6. æ˜¾ç¤ºç»“æœ
    WriteLn('æ”¶åˆ°å“åº” (', LBytesRead, ' å­—èŠ‚):');
    WriteLn(Copy(LResponse, 1, 200), '...');
    
    WriteLn;
    WriteLn('æˆåŠŸï¼');
    
  except
    on E: ESSLException do
      WriteLn('SSLé”™è¯¯: ', E.Message);
    on E: Exception do
      WriteLn('é”™è¯¯: ', E.Message);
  end;
end.
```

### ç¼–è¯‘è¿è¡Œ

```bash
# Free Pascal
fpc my_first_https.pas
./my_first_https

# æˆ–ä½¿ç”¨ Lazarus
# æ‰“å¼€é¡¹ç›® â†’ è¿è¡Œ (F9)
```

### é¢„æœŸè¾“å‡º

```
åˆ›å»ºSSLä¸Šä¸‹æ–‡...
åˆ›å»ºè¿æ¥...
è¿æ¥åˆ° www.google.com:443...
è¿æ¥æˆåŠŸï¼
å‘é€è¯·æ±‚...
è¯»å–å“åº”...
æ”¶åˆ°å“åº” (8192 å­—èŠ‚):
HTTP/1.1 200 OK
Date: Wed, 05 Nov 2025 12:00:00 GMT
...

æˆåŠŸï¼
```

---

## ä½¿ç”¨ç”Ÿäº§çº§ç¤ºä¾‹

æˆ‘ä»¬æä¾›äº†æ›´å®Œæ•´çš„ç”Ÿäº§çº§ç¤ºä¾‹ï¼ŒåŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—ï¼š

```bash
# ç®€å•HTTPS GETè¯·æ±‚
cd examples/production
fpc https_client_simple.pas
./https_client_simple https://www.google.com

# POSTè¯·æ±‚
fpc https_client_post.pas
./https_client_post https://httpbin.org/post '{"test":"data"}' application/json

# å®¢æˆ·ç«¯è¯ä¹¦è®¤è¯
fpc https_client_auth.pas
./https_client_auth https://example.com client.pem client.key

# ä¼šè¯å¤ç”¨æµ‹è¯•
fpc https_client_session.pas
./https_client_session https://www.google.com 10
```

---

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘æ—¶æ‰¾ä¸åˆ° OpenSSL

**A:** ç¡®ä¿å·²å®‰è£… OpenSSL å¼€å‘åŒ…ï¼š

```bash
# Ubuntu/Debian
sudo apt-get install libssl-dev

# CentOS/RHEL
sudo yum install openssl-devel

# macOS
brew install openssl
```

### Q: è¿æ¥å¤±è´¥

**A:** æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
2. ç›®æ ‡æœåŠ¡å™¨æ˜¯å¦å¯è®¿é—®
3. ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ˆHTTPSé»˜è®¤443ï¼‰
4. é˜²ç«å¢™è®¾ç½®

### Q: è¯ä¹¦éªŒè¯å¤±è´¥

**A:** å¯¹äºæµ‹è¯•ï¼Œå¯ä»¥ç¦ç”¨éªŒè¯ï¼š

```pascal
LContext.SetVerifyMode([sslVerifyNone]);
```

âš ï¸ **è­¦å‘Š**ï¼šç”Ÿäº§ç¯å¢ƒåŠ¡å¿…å¯ç”¨è¯ä¹¦éªŒè¯ï¼

### Q: å¦‚ä½•å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼Ÿ

**A:** ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿï¼š

```pascal
uses
  fafafa.ssl.logger;

var
  LLogger: ILogger;
begin
  LLogger := TConsoleLogger.Create('app.log', llDebug);
  // ä½ çš„ä»£ç 
end;
```

---

## ä¸‹ä¸€æ­¥

æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº†ç¬¬ä¸€ä¸ª HTTPS è¯·æ±‚ã€‚æ¥ä¸‹æ¥å¯ä»¥ï¼š

### å­¦ä¹ æ›´å¤šåŠŸèƒ½
- [ç¬¬ä¸€ä¸ªåº”ç”¨](ç¬¬ä¸€ä¸ªåº”ç”¨.md) - å®Œæ•´çš„åº”ç”¨ç¤ºä¾‹
- [å®‰è£…é…ç½®](å®‰è£…é…ç½®.md) - è¯¦ç»†çš„é…ç½®è¯´æ˜
- [APIå‚è€ƒ](APIå‚è€ƒ/æ¦‚è¿°.md) - å®Œæ•´çš„APIæ–‡æ¡£

### æŸ¥çœ‹ç¤ºä¾‹ä»£ç 
- `examples/production/` - ç”Ÿäº§çº§ç¤ºä¾‹
- `examples/validation/` - æµ‹è¯•å’ŒéªŒè¯å·¥å…·
- `tests/` - å•å…ƒæµ‹è¯•

### è¿è¡ŒçœŸå®ç½‘ç«™æµ‹è¯•
éªŒè¯åº“çš„å¯ç”¨æ€§ï¼š

```bash
cd examples/validation
fpc real_world_test.pas
./real_world_test
```

è¿™å°†æµ‹è¯•20ä¸ªçœŸå®HTTPSç½‘ç«™ï¼Œç”Ÿæˆè¯¦ç»†æŠ¥å‘Šã€‚

### è·å–å¸®åŠ©
- [FAQ](FAQ.md) - å¸¸è§é—®é¢˜è§£ç­”
- [GitHub Issues](https://github.com/ä½ çš„ç”¨æˆ·å/fafafa.ssl/issues) - æŠ¥å‘Šé—®é¢˜
- [è®¨è®ºåŒº](https://github.com/ä½ çš„ç”¨æˆ·å/fafafa.ssl/discussions) - äº¤æµè®¨è®º

---

## æ€»ç»“

æ‚¨ç°åœ¨å·²ç»å­¦ä¼šäº†ï¼š
- âœ… å®‰è£… fafafa.ssl
- âœ… åˆ›å»ºç¬¬ä¸€ä¸ª HTTPS è¯·æ±‚
- âœ… ä½¿ç”¨ç”Ÿäº§çº§ç¤ºä¾‹
- âœ… è§£å†³å¸¸è§é—®é¢˜

å¼€å§‹æ„å»ºæ‚¨çš„ HTTPS åº”ç”¨å§ï¼ğŸš€

---

**ä¸‹ä¸€ç¯‡**ï¼š[ç¬¬ä¸€ä¸ªåº”ç”¨ â†’](ç¬¬ä¸€ä¸ªåº”ç”¨.md)


