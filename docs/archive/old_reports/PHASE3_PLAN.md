# Phase 3: 全面模块验证计划

## 目标
系统性测试所有 72 个 OpenSSL 模块，确保 OpenSSL 3.x 完全兼容。

## 当前状态
- **已完成**: Phase 1 (SHA3, CMAC EVP) + Phase 2 (AEAD验证)
- **已测试模块**: 19/72 (26.4%)
- **测试通过率**: 93.2% (164/176)
- **剩余模块**: 53 个

## 测试策略

### 批次 1: 核心加密模块 (优先级 HIGH) - 12 模块
这些是最常用的加密功能，必须优先验证。

1. **ChaCha20** - ChaCha20-Poly1305 (已在 Phase 2 部分测试)
2. **Camellia** - Camellia 加密
3. **Blowfish** - Blowfish 加密
4. **CAST** - CAST5 加密
5. **RC2** - RC2 加密
6. **RC4** - RC4 流密码
7. **IDEA** - IDEA 加密
8. **SHA3** - SHA-3/SHAKE (已在 Phase 1 测试)
9. **BLAKE2** - BLAKE2 哈希
10. **Whirlpool** - Whirlpool 哈希
11. **RIPEMD** - RIPEMD 哈希
12. **MODES** - 高级分组模式

### 批次 2: PKI 和证书模块 (优先级 HIGH) - 8 模块
证书和 PKI 功能对 SSL/TLS 至关重要。

13. **X509** - X.509 证书
14. **PEM** - PEM 格式
15. **ASN1** - ASN.1 编码
16. **PKCS7** - PKCS#7 容器
17. **PKCS12** - PKCS#12 容器
18. **X509V3** - X.509v3 扩展
19. **OCSP** - 在线证书状态
20. **CMS** - 加密消息语法

### 批次 3: 中国加密标准 (优先级 MEDIUM) - 3 模块
中国加密算法支持。

21. **SM2** - SM2 椭圆曲线
22. **SM3** - SM3 哈希
23. **SM4** - SM4 分组密码

### 批次 4: 密钥派生和高级功能 (优先级 MEDIUM) - 6 模块
密钥管理和派生功能。

24. **SCRYPT** - SCrypt 算法 (部分已测试)
25. **ENGINE** - 硬件加速
26. **ASYNC** - 异步操作
27. **COMP** - 压缩算法
28. **SRP** - SRP 协议
29. **PROVIDER** - Provider 架构 (OpenSSL 3.x 新功能)

### 批次 5: 数据结构和工具模块 (优先级 LOW) - 8 模块
支持性模块。

30. **STACK** - 栈数据结构
31. **LHASH** - 哈希表
32. **BUFFER** - 缓冲区管理
33. **OBJ** - 对象标识符
34. **TXT_DB** - 文本数据库
35. **DSO** - 动态共享对象
36. **PARAM** - OSSL_PARAM 参数
37. **CRYPTO** - 通用加密函数

### 批次 6: SSL/TLS 协议模块 (优先级 HIGH) - 10 模块
SSL/TLS 核心功能。

38. **SSL/CORE** - SSL 核心功能
39. **SSL/Context** - SSL 上下文
40. **SSL/Connection** - SSL 连接
41. **SSL/Session** - SSL 会话
42. **SSL/Cipher** - SSL 密码套件
43. **SSL/Alert** - SSL 警报
44. **SSL/Extension** - SSL 扩展
45. **SSL/ALPN** - ALPN 协议
46. **SSL/SNI** - SNI 支持
47. **SSL/Ticket** - 会话票据

### 批次 7: 其他模块 (优先级 MEDIUM) - 6 模块

48. **TS** - 时间戳协议
49. **CT** - 证书透明度
50. **STORE** - 统一存储
51. **UI** - 用户交互
52. **CONF** - 配置文件
53. **MDC2** - MDC2 哈希

## 测试方法

### 对于每个模块：
1. **检查现有测试** - 是否已有测试程序
2. **创建/更新测试** - 如需要
3. **编译测试** - 确保编译通过
4. **运行测试** - 执行所有测试用例
5. **记录结果** - 更新 TEST_PLAN.md
6. **修复问题** - 如发现兼容性问题
7. **更新文档** - 更新 WORKING.md

### 测试用例标准：
- ✅ 模块加载测试
- ✅ 基本功能测试
- ✅ 边界条件测试
- ✅ 标准测试向量验证
- ✅ 增量处理测试

## 执行顺序

### Week 1: 核心加密 (批次 1)
- 目标: 完成 12 个核心加密模块
- 预计: 8-12 小时

### Week 2: PKI 和证书 (批次 2)
- 目标: 完成 8 个 PKI 模块
- 预计: 6-10 小时

### Week 3: 专用和高级功能 (批次 3-4)
- 目标: 完成 9 个模块
- 预计: 6-8 小时

### Week 4: SSL/TLS (批次 6)
- 目标: 完成 10 个 SSL 模块
- 预计: 8-12 小时

### Week 5: 工具和其他 (批次 5 + 7)
- 目标: 完成剩余 14 个模块
- 预计: 6-10 小时

**总预计时间**: 34-52 小时

## 成功标准

- ✅ 所有 72 模块测试完成
- ✅ 总体通过率 ≥ 95%
- ✅ 所有 OpenSSL 3.x 兼容性问题已记录
- ✅ 所有发现的问题已修复或文档化
- ✅ 完整的测试报告

## 工具

### 自动化测试脚本
```powershell
# run_phase3_tests.ps1
# 批量编译和运行所有测试
```

### 测试模板
- 标准化的测试程序模板
- 统一的结果报告格式

## 进度跟踪

每完成一个批次后更新：
- [ ] 批次 1: 核心加密模块 (0/12)
- [ ] 批次 2: PKI 和证书模块 (0/8)
- [ ] 批次 3: 中国加密标准 (0/3)
- [ ] 批次 4: 高级功能 (0/6)
- [ ] 批次 5: 数据结构和工具 (0/8)
- [ ] 批次 6: SSL/TLS 协议 (0/10)
- [ ] 批次 7: 其他模块 (0/6)

**总进度**: 0/53 模块 (继续前进！)

---

**创建日期**: 2025-10-02
**状态**: 启动
**下一步**: 开始批次 1 - 核心加密模块测试
